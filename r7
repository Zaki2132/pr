body = {
    "filters": [],
    "page": 0,
    "size": 100
}

assets = []

while True:
    response = requests.post(url, headers=headers, json=body)
    if response.status_code != 200:
        print("Erreur:", response.status_code, response.text)
        break

    data = response.json()
    assets.extend(data.get("resources", []))

    if data.get("page", 0) >= data.get("totalPages", 1) - 1:
        break

    body["page"] += 1

print(f"Total assets récupérés : {len(assets)}")
