import requests

# ğŸ‘‰ Ta clÃ© API
API_KEY = 'VOTRE_API_KEY_ICI'

# ğŸ‘‰ URL de base pour la rÃ©gion Europe
BASE_URL = 'https://eu.api.insight.rapid7.com/vm/v4'

# ğŸ‘‰ Endpoint pour rÃ©cupÃ©rer les assets
url = f'{BASE_URL}/assets'

# ğŸ‘‰ Headers avec la clÃ© API
headers = {
    'X-Api-Key': API_KEY,
    'Accept': 'application/json'
}

# ğŸ‘‰ Appel GET Ã  l'API
response = requests.get(url, headers=headers)

# ğŸ‘‰ VÃ©rification du rÃ©sultat
if response.status_code == 200:
    data = response.json()
    print("âœ… RequÃªte rÃ©ussie. Voici les premiers assets :\n")
    for asset in data.get('resources', [])[:5]:  # Affiche les 5 premiers
        print(f"ID: {asset.get('id')}, Hostname: {asset.get('host_name')}")
else:
    print(f"âŒ Erreur {response.status_code} : {response.text}")
