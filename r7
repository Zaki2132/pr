import requests

# 👉 Ta clé API
API_KEY = 'VOTRE_API_KEY_ICI'

# 👉 URL de base pour la région Europe
BASE_URL = 'https://eu.api.insight.rapid7.com/vm/v4'

# 👉 Endpoint pour récupérer les assets
url = f'{BASE_URL}/assets'

# 👉 Headers avec la clé API
headers = {
    'X-Api-Key': API_KEY,
    'Accept': 'application/json'
}

# 👉 Appel GET à l'API
response = requests.get(url, headers=headers)

# 👉 Vérification du résultat
if response.status_code == 200:
    data = response.json()
    print("✅ Requête réussie. Voici les premiers assets :\n")
    for asset in data.get('resources', [])[:5]:  # Affiche les 5 premiers
        print(f"ID: {asset.get('id')}, Hostname: {asset.get('host_name')}")
else:
    print(f"❌ Erreur {response.status_code} : {response.text}")
